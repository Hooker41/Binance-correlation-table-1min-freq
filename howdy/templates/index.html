<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Howdy!</title>
    </head>
    <body>
        <table>
            <thead>
            </thead>
            <tbody>
                <tr>
                    <td></td>
                </tr>
            </tbody>
        </table>

    </body>
</html>
<style>
    table {
        border-collapse: collapse;
        width: 100%;
    }
    
    th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    
    tr:hover {background-color:#f5f5f5;}

    td:first-child {
        font-weight: bold
    }
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script type="text/javascript">
    $( document ).ready(function() {
        setInterval(function(){
            $.ajax({
                url:'getprice/' ,
                type: "get",
                cache: true,
                timeout: 30000,
                dataType: 'html',
                success: function(data) {
                    console.log("success");

                    $('tbody').empty();
                    $('thead').empty();

                    var obj = jQuery.parseJSON( data );

                    var thead_ary= obj.columns;
                    //thead
                    var thead_str = '<tr><th></th>';
                    thead_ary.forEach(function(ele) {
                        thead_str += '<th>' + ele + '</th>';
                    });
                    thead_str += '</tr>'
                    $('thead').append(thead_str);

                    var tbody_data = obj.data;
                    var tbody_str = "";
                    tbody_data.forEach(function(row, idx) {
                        tbody_str += '<tr><td>' + thead_ary[idx] + '</td>';
                        row.forEach(function(ele, idx) {
                            tbody_str += '<td>' + ele + '</td>';
                        });
                        tbody_str += '</tr>';
                    });
                    $('tbody').append(tbody_str);
                },
                error: function(data) {
                    alert("Got an error dude "+data);
                }
            });
        },60000);
    });
</script>
    
    
